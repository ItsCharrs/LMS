(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55436,e=>{"use strict";let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],55436)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},92911,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(22016),a=e.i(88844),d=e.i(55436);let l=(0,e.i(75254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var i=e.i(72520),n=e.i(46897),c=e.i(87316),o=e.i(67881),u=e.i(23750),x=e.i(62870),m=e.i(97815),h=e.i(54858);function g(){let{backendUser:e}=(0,m.useAuth)(),[g,p]=(0,r.useState)([]),[b,f]=(0,r.useState)(!0),[j,N]=(0,r.useState)(""),[v,y]=(0,r.useState)("all"),[k,S]=(0,r.useState)(null),[w,C]=(0,r.useState)(null),[I,T]=(0,r.useState)(1),[D,E]=(0,r.useState)(0),_=async e=>{try{f(!0);let t=new URLSearchParams;j&&t.append("search",j),"all"!==v&&t.append("status",v);let r=e||`/customers/me/orders/?${t.toString()}`;if(e&&e.startsWith("http")){let t=new URL(e);r=t.pathname+t.search}let s=await h.default.get(r);p(s.data.results),S(s.data.next),C(s.data.previous),E(s.data.count)}catch(e){console.error("Failed to fetch orders:",e)}finally{f(!1)}};(0,r.useEffect)(()=>{let t=setTimeout(()=>{e&&_()},500);return()=>clearTimeout(t)},[j,v,e]);let A=(e,t)=>{e&&(_(e),T(e=>"next"===t?e+1:e-1))};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"My Orders"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Track and manage all your shipments in one place."})]}),(0,t.jsx)("div",{className:"bg-card rounded-xl border border-border p-6 shadow-sm",children:(0,t.jsxs)("div",{className:"grid md:grid-cols-[1fr_200px] gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(d.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,t.jsx)(u.Input,{placeholder:"Search by ID, city, or address...",value:j,onChange:e=>N(e.target.value),className:"pl-10 h-12 bg-background border-input text-foreground"})]}),(0,t.jsxs)(x.Select,{value:v,onValueChange:y,children:[(0,t.jsxs)(x.SelectTrigger,{className:"h-12 bg-background border-input text-foreground",children:[(0,t.jsx)(l,{className:"h-4 w-4 mr-2"}),(0,t.jsx)(x.SelectValue,{placeholder:"Filter by status"})]}),(0,t.jsxs)(x.SelectContent,{children:[(0,t.jsx)(x.SelectItem,{value:"all",children:"All Orders"}),(0,t.jsx)(x.SelectItem,{value:"PENDING",children:"Pending"}),(0,t.jsx)(x.SelectItem,{value:"IN_TRANSIT",children:"In Transit"}),(0,t.jsx)(x.SelectItem,{value:"DELIVERED",children:"Delivered"}),(0,t.jsx)(x.SelectItem,{value:"CANCELLED",children:"Cancelled"})]})]})]})}),(0,t.jsx)("div",{className:"space-y-4",children:b?(0,t.jsx)("div",{className:"p-12 text-center text-muted-foreground",children:"Loading orders..."}):0===g.length?(0,t.jsxs)("div",{className:"bg-card rounded-xl border border-border p-12 text-center shadow-sm",children:[(0,t.jsx)(a.Package,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No orders found"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6",children:"Try adjusting your search or filters."}),(0,t.jsx)(o.Button,{asChild:!0,className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:(0,t.jsx)(s.default,{href:"/book",children:"Create New Order"})})]}):g.map(e=>(0,t.jsx)("div",{className:"bg-card rounded-xl border border-border p-6 hover:shadow-lg transition-shadow",children:(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-foreground",children:["Order #",e.job_number?e.job_number:`${e.id.slice(0,8)}...`]}),(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${(e=>{switch(e){case"IN_TRANSIT":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400";case"DELIVERED":return"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400";case"PENDING":return"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400";case"CANCELLED":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400";default:return"bg-muted text-muted-foreground"}})(e.status)}`,children:e.status.replace("_"," ")})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(n.MapPin,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-foreground",children:e.pickup_city}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["â†’ ",e.delivery_city]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(c.Calendar,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-medium text-foreground",children:["Pickup: ",new Date(e.requested_pickup_date).toLocaleDateString()]}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["ETA: ",e.estimated_delivery?new Date(e.estimated_delivery).toLocaleDateString():"Pending"]})]})]})]}),(0,t.jsx)("div",{className:"pt-2 border-t border-border",children:(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:e.service_type.replace("_"," ")})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 lg:flex-shrink-0",children:[(0,t.jsx)(o.Button,{asChild:!0,className:"bg-blue-600 hover:bg-blue-700 text-white",children:(0,t.jsxs)(s.default,{href:`/track/${e.id}`,children:["Track Order ",(0,t.jsx)(i.ArrowRight,{className:"ml-2 h-4 w-4"})]})}),(0,t.jsx)(o.Button,{asChild:!0,variant:"outline",className:"text-foreground border-input hover:bg-accent hover:text-accent-foreground",children:(0,t.jsx)(s.default,{href:`/dashboard/orders/${e.id}`,children:"View Details"})})]})]})},e.id))}),D>0&&(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 pt-6",children:[(0,t.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>A(w,"prev"),disabled:!w,className:"text-foreground border-input disabled:opacity-50",children:"Previous"}),(0,t.jsxs)("span",{className:"text-sm text-foreground",children:["Page ",I]}),(0,t.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>A(k,"next"),disabled:!k,className:"text-foreground border-input disabled:opacity-50",children:"Next"})]})]})}e.s(["default",()=>g],92911)}]);